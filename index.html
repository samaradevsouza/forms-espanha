<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" />
    <title>Preenchimento de forms - Squad Espanha</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>&#10048; Formulários de Espanha &#10048;</h1>
        <p id="info">Anexo I, Anexo V, Registro Civil, Solicitud de inscripción como residente</p>
    </header>

    <main>
        <form id="formulario">
            <div id="comuns">
                <p>dados gerais</p>
                <div class="input">
                    <label for="nomeReq">Primeiro nome do requerente: </label>
                    <input type="text" name="nomeReq" id="nomeReq">
                </div>

                <div class="input">
                    <label for="sobrenomeReq1">Primeiro sobrenome do requerente: </label>
                    <input type="text" name="sobrenomeReq1" id="sobrenomeReq1">
                </div>

                <div class="input">
                    <label for="sobrenomeReq2">Segundo sobrenome do requerente: </label>
                    <input type="text" name="sobrenomeReq2" id="sobrenomeReq2">
                </div><br>

                <div class="input">
                    <label for="sobrenomePai">Primeiro sobrenome do pai do requerente: </label>
                    <input type="text" name="sobrenomePai" id="sobrenomePai">
                </div>

                <div class="input">
                    <label for="sobrenomeMae">Primeiro sobrenome da mãe do requerente</label>
                    <input type="text" name="sobrenomeMae" id="sobrenomeMae">
                </div>

                <div class="input">
                    <label for="nacionalidadeReq">Nacionalidade:</label>
                    <input type="text" name="nacionalidadeReq" id="nacionalidadeReq" value="brasileña">
                </div>

                <div class="input">
                    <label for="estadoCivilReq">Estado civil do requerente: </label>
                    <input type="text" name="estadoCivilReq" id="estadoCivilReq">
                </div>

                <div class="input">
                    <label for="numPassaporteReq">Número do passaporte: </label>
                    <input type="text" name="numPassaporteReq" id="numPassaporteReq">
                </div>

                <div class="input">
                    <label for="endReq">Endereço residencial completo do requerente: </label>
                    <input type="text" name="endReq" id="endReq">
                </div>

                <div class="input">
                    <label for="estadoReq">Estado de residencia do requerente: </label>
                    <input type="text" name="estadoReq" id="estadoReq">
                </div>

                <div class="input">
                    <label for="cepReq">CEP de residência do requerente: </label>
                    <input type="text" name="cepReq" id="cepReq">
                </div>

                <div class="input">
                    <label for="paisReq">País de residência do requerente</label>
                    <input type="text" name="paisReq" id="paisReq">
                </div>

                <div class="input">
                    <label for="telReq">Telefone celular do requerente</label>
                    <input type="text" name="telReq" id="telReq">
                </div>

                <div class="input">
                    <label for="emailReq">E-mail do requerente</label>
                    <input type="text" name="emailReq" id="emailReq">
                </div>

                <div class="input">
                    <label for="cidadeConsulado">Cidade do Consulado: </label>
                    <input type="text" name="cidadeConsulado" id="cidadeConsulado">
                </div>
            </div>

            <div id="ddn">
                <p>DATOS DEL NACIMIENTO</p>
                <div class="input">
                    <label for="hora">Hora:</label>
                    <input type="text" name="hora" id="hora" placeholder="00:00">
                </div>
                <div class="input">
                    <label for="diaReq">Dia:</label>
                    <input type="text" name="diaReq" id="diaReq">
                </div>
                <div class="input">
                    <label for="anoReq">Año</label>
                    <input type="text" name="anoReq" id="anoReq">
                </div>
                <div class="input">
                    <label for="localidad">Local de nascimento:</label>
                    <input type="text" name="localidad" id="localidad">
                </div>
                <div class="input">
                    <label for="paisNasc">País:</label>
                    <input type="text" name="paisNasc" id="paisNasc">
                </div>
                <div class="input">
                    <label for="diaRegistro">Dia do registro: </label>
                    <input type="text" name="diaRegistro" id="diaRegistro" placeholder="DD">
                </div>
                <div class="input">
                    <label for="anoRegistro">Ano do registro:</label>
                    <input type="text" name="anoRegistro" id="anoRegistro" placeholder="AAAA">
                </div>
                <div class="input">
                    <label for="localRegistro">Local do Registro</label>
                    <input type="text" name="localRegistro" id="localRegistro">
                </div>
                <div class="input">
                    <label for="paisRegistro">País do registro: </label>
                    <input type="text" name="paisRegistro" id="paisRegistro">
                </div>
                <div class="input">
                    <label for="livro">Livro: </label>
                    <input type="text" name="livro" id="livro">
                </div>
                <div class="input">
                    <label for="folha">Folha:</label>
                    <input type="text" name="folha" id="folha">
                </div>
                <div class="input">
                    <label for="termo">Termo: </label>
                    <input type="text" name="termo" id="termo">
                </div>

                <p>DATOS DEL PADRE</p>
                <div class="input">
                    <label for="nomePai">Primeiro nome do pai: </label>
                    <input type="text" name="nomePai" id="nomePai">
                </div>
                <div class="input">
                    <label for="sobrenomePai1">Primeiro sobrenome do pai: </label>
                    <input type="text" name="sobrenomePai1" id="sobrenomePai1">
                </div>
                <div class="input">
                    <label for="sobrenomePai2">Segundo sobrenome do pai:</label>
                    <input type="text" name="sobrenomePai2" id="sobrenomePai2">
                </div>
                <div class="input">
                    <label for="paiPai">Pai:</label>
                    <input type="text" name="paiPai" id="paiPai">
                </div>
                <div class="input">
                    <label for="maePai">Mãe:</label>
                    <input type="text" name="maePai" id="maePai">
                </div>
                <div class="input">
                    <label for="localidadPai">Local de nascimento:</label>
                    <input type="text" name="localidadPai" id="localidadPai">
                </div>
                <div class="input">
                    <label for="paisNascPai">País: </label>
                    <input type="text" name="paisNascPai" id="paisNascPai">
                </div>
                <div class="input">
                    <label for="diaNascPai">Dia de nascimento:</label>
                    <input type="text" name="diaNascPai" id="diaNascPai" placeholder="DD">
                </div>
                <div class="input">
                    <label for="anoNascPai">Ano de nascimento: </label>
                    <input type="text" name="anoNascPai" id="anoNascPai" placeholder="AAAA">
                </div>
                <div class="input">
                    <label for="">Estado civil do pai no nascimento do(a) filho(a):</label>
                    <input type="text" name="estadoCivilPai1" id="estadoCivilPai1">
                </div>
                <div class="input">
                    <label for="estadoCivilPai2">Estado civil do pai atualmente:</label>
                    <input type="text" name="estadoCivilPai2" id="estadoCivilPai2">
                </div>
                <div class="input">
                    <label for="nacionalidadePai1">Nacionalidade do pai ao nascer do(a) filho(a)</label>
                    <input type="text" name="nacionalidadePai1" id="nacionalidadePai1">
                </div>
                <div class="input">
                    <label for="nacionalidadePai2">Nacionalidade do pai atualmente: </label>
                    <input type="text" name="nacionalidadePai2" id="nacionalidadePai2">
                </div>
                <div class="input">
                    <label for="domicilioPai">Domicilio do pai no momento de nascimento do(a) filho(a): </label>
                    <input type="text" name="domicilioPai" id="domicilioPai">
                </div>

                <p>DATOS DE LA MADRE</p>

                <div class="input">
                    <label for="nomeMae">Primeiro nome da mãe: </label>
                    <input type="text" name="nomeMae" id="nomeMae">
                </div>
                <div class="input">
                    <label for="sobrenomeMae1">Primeiro sobrenome da mãe: </label>
                    <input type="text" name="sobrenomeMae1" id="sobrenomeMae1">
                </div>
                <div class="input">
                    <label for="sobrenomeMae2">Segunda sobrenome da mãe:</label>
                    <input type="text" name="sobrenomeMae2" id="sobrenomeMae2">
                </div>
                <div class="input">
                    <label for="maeMae">Mãe:</label>
                    <input type="text" name="maeMae" id="maeMae">
                </div>
                <div class="input">
                    <label for="paiMae">Pai:</label>
                    <input type="text" name="paiMae" id="paiMae">
                </div>
                <div class="input">
                    <label for="localidadMae">Local de nascimento:</label>
                    <input type="text" name="localidadMae" id="localidadMae">
                </div>
                <div class="input">
                    <label for="MaesNascMae">País: </label>
                    <input type="text" name="PaisNascMae" id="PaisNascMae">
                </div>
                <div class="input">
                    <label for="diaNascMae">Dia de nascimento:</label>
                    <input type="text" name="diaNascMae" id="diaNascMae" placeholder="DD">
                </div>
                <div class="input">
                    <label for="anoNascMae">Ano de nascimento: </label>
                    <input type="text" name="anoNascMae" id="anoNascMae" placeholder="AAAA">
                </div>
                <div class="input">
                    <label for="EstadoCivilMae1">Estado civil da mãe no nascimento do(a) filho(a):</label>
                    <input type="text" name="EstadoCivilMae1" id="EstadoCivilMae1">
                </div>
                <div class="input">
                    <label for="EstadoCivilMae2">Estado civil da mãe atualmente:</label>
                    <input type="text" name="EstadoCivilMae2" id="EstadoCivilMae2">
                </div>
                <div class="input">
                    <label for="nacionalidadeMae1">Nacionalidade da mãe ao nascer do(a) filho(a)</label>
                    <input type="text" name="nacionalidadeMae1" id="nacionalidadeMae1">
                </div>
                <div class="input">
                    <label for="nacionalidadeMae2">Nacionalidade da mãe atualmente: </label>
                    <input type="text" name="nacionalidadeMae2" id="nacionalidadeMae2">
                </div>
                <div class="input">
                    <label for="domicilioMae">Domicilio da mãe no momento de nascimento do(a) filho(a): </label>
                    <input type="text" name="domicilioMae" id="domicilioMae">
                </div>

                <p>MATRIMONIO DE LOS PADRES</p>
                <div class="input">
                    <label for="diaCelebracao">Dia da celebração:</label>
                    <input type="text" name="diaCelebracao" id="diaCelebracao">
                </div>
                <div class="input">
                    <label for="anoCelebracao">Ano da celebração: </label>
                    <input type="text" name="anoCelebracao" id="anoCelebracao">
                </div>
                <div class="input">
                    <label for="localCelebracao">Local da celebração: </label>
                    <input type="text" name="localCelebracao" id="localCelebracao" placeholder="Cidade, estado, país">
                </div>
                <div class="input">
                    <label for="localRegistroCas">Lugar que foi registrado: </label>
                    <input type="text" name="localRegistroCas" id="localRegistroCas" placeholder="Cidade, estado, país">
                </div>

                <p>DECLARANTE</p>
                <div class="input">
                    <label for="nomeCompletoReq">Nome completo do Requerente:</label>
                    <input type="text" name="nomeCompletoReq" id="nomeCompletoReq">
                </div>
                <div class="input">
                    <label for="calidad">En calidad de…</label>
                    <input type="text" name="calidad" id="calidad" value="Interesado">
                </div>
                <div class="input">
                    <label for="docId">Documento de identificação: </label>
                    <input type="text" name="docId" id="docId">
                </div>
            </div>
            <div id="solicitud">
                <p>SOLICITUD DE INSCRIPCIÓN COMO RESIDENTE</p>

                <div class="input">
                    <label for="dataNasc">Data de nascimento:</label>
                    <input type="text" name="dataNasc" id="dataNasc" placeholder="DD/MM/AAAA">
                </div>
                <div class="input">
                    <label for="conjugeReq">Nome do(a) conjuge: </label>
                    <input type="text" name="conjugeReq" id="conjugeReq" placeholder="Se houver">
                </div>
            </div>

            <center><button type="submit">Preencher!</button></center>
        </form>
    </main>

    <footer>
        <p>&#10022; Desenvolvido com carinho por <a href="https://github.com/samaradevsouza">Samara de Souza</a>
            &#10022;</p>
        <p>Caso tenha alguma sugestão, me manda uma mensagem no Teams! :)</p>
    </footer>

    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <script>
        const formHtml = document.getElementById('formulario');

        formHtml.addEventListener('submit', async (e) => {
            e.preventDefault();

            const { PDFDocument } = PDFLib;

            // Coleta os dados do formulário
            const dados = {
                nomeReq: document.getElementById('nomeReq').value,
                sobrenomeReq1: document.getElementById('sobrenomeReq1').value,
                sobrenomePai: document.getElementById('sobrenomePai').value,
                sobrenomeMae: document.getElementById('sobrenomeMae').value,
                nacionalidadeReq: document.getElementById('nacionalidadeReq').value,
                estadoCivilReq: document.getElementById('estadoCivilReq').value,
                numPassaporteReq: document.getElementById('numPassaporteReq').value,
                endReq: document.getElementById('endReq').value,
                estadoReq: document.getElementById('estadoReq').value,
                cepReq: document.getElementById('cepReq').value,
                paisReq: document.getElementById('paisReq').value,
                telReq: document.getElementById('telReq').value,
                emailReq: document.getElementById('emailReq').value,
                cidadeConsulado: document.getElementById('cidadeConsulado').value,
                dataNasc: document.getElementById('dataNasc').value,
                conjugeReq: document.getElementById('conjugeReq').value,
            };

            const enderecoCompleto = dados.endReq + " " + dados.estadoReq + " " + dados.paisReq + " " + dados.cepReq;

            const dadosDDN = {
                sobrenomeReq1: document.getElementById('sobrenomeReq1').value,
                sobrenomeReq2: document.getElementById('sobrenomeReq2').value,
                hora: document.getElementById('hora').value,
                diaReq: document.getElementById('diaReq').value,
                anoReq: document.getElementById('anoReq').value,
                localidad: document.getElementById('localidad').value,
                paisNasc: document.getElementById('paisNasc').value,
                diaRegistro: document.getElementById('diaRegistro').value,
                anoRegistro: document.getElementById('anoRegistro').value,
                localRegistro: document.getElementById('localRegistro').value,
                paisRegistro: document.getElementById('paisRegistro').value,
                livro: document.getElementById('livro').value,
                folha: document.getElementById('folha').value,
                termo: document.getElementById('termo').value,

                nomePai: document.getElementById('nomePai').value,
                sobrenomePai1: document.getElementById('sobrenomePai1').value,
                sobrenomePai2: document.getElementById('sobrenomePai2').value,
                paiPai: document.getElementById('paiPai').value,
                maePai: document.getElementById('maePai').value,
                localidadPai: document.getElementById('localidadPai').value,
                paisNascPai: document.getElementById('paisNascPai').value,
                diaNascPai: document.getElementById('diaNascPai').value,
                anoNascPai: document.getElementById('anoNascPai').value,
                estadoCivilPai1: document.getElementById('estadoCivilPai1').value,
                estadoCivilPai2: document.getElementById('estadoCivilPai2').value,
                nacionalidadePai1: document.getElementById('nacionalidadePai1').value,
                nacionalidadePai2: document.getElementById('nacionalidadePai2').value,
                domicilioPai: document.getElementById('domicilioPai').value,

                nomeMae: document.getElementById('nomeMae').value,
                sobrenomeMae1: document.getElementById('sobrenomeMae1').value,
                sobrenomeMae2: document.getElementById('sobrenomeMae2').value,
                maeMae: document.getElementById('maeMae').value,
                paiMae: document.getElementById('paiMae').value,
                localidadMae: document.getElementById('localidadMae').value,
                PaisNascMae: document.getElementById('PaisNascMae').value,
                diaNascMae: document.getElementById('diaNascMae').value,
                anoNascMae: document.getElementById('anoNascMae').value,
                EstadoCivilMae1: document.getElementById('EstadoCivilMae1').value,
                EstadoCivilMae2: document.getElementById('EstadoCivilMae2').value,
                nacionalidadeMae1: document.getElementById('nacionalidadeMae1').value,
                nacionalidadeMae2: document.getElementById('nacionalidadeMae2').value,
                domicilioMae: document.getElementById('domicilioMae').value,

                diaCelebracao: document.getElementById('diaCelebracao').value,
                anoCelebracao: document.getElementById('anoCelebracao').value,
                localCelebracao: document.getElementById('localCelebracao').value,
                localRegistroCas: document.getElementById('localRegistroCas').value,

                nomeCompletoReq: document.getElementById('nomeCompletoReq').value,
                calidad: document.getElementById('calidad').value,
                docId: document.getElementById('docId').value

            }

            const naturalDe = dadosDDN.localidad + " " + dadosDDN.paisNasc;

            // Lista de PDFs a serem preenchidos
            const arquivos = [
                {
                    url: './forms-sp/anexo1.pdf',
                    nome: 'AnexoI.pdf',
                    campos: {
                        'Textfield': dados.nomeReq,
                        'Textfield-0': dados.sobrenomePai,
                        'Textfield-1': dados.sobrenomeMae,
                        'Textfield-2': dados.nacionalidadeReq,
                        'Textfield-3': dados.estadoCivilReq,
                        'Textfield-4': dados.numPassaporteReq,
                        'Textfield-5': dados.paisReq,
                        'Textfield-6': dados.emailReq,
                        'Textfield-0a': dados.cidadeConsulado,
                        'Textfielda-3': dados.endReq,
                        'Textaafield-3': dados.estadoReq,
                        'Textfddield-3': dados.telReq,
                        'Texto1': dados.cidadeConsulado,
                        'Taextfield-6': 'Española',
                    }
                },
                {
                    url: './forms-sp/anexo5.pdf',
                    nome: 'AnexoV.pdf',
                    campos: {
                        'Textfield': dados.nomeReq + " " + dados.sobrenomeReq1,
                        'Textfield-0': dados.nomeReq,
                        'Textfield-1': dados.sobrenomePai,
                        'Textfield-2': dados.nacionalidadeReq,
                        'Textfield-3': dados.sobrenomeMae,
                        'Textfield-4': dados.numPassaporteReq,
                        'Textfield-5': dados.endReq,
                        'Textfield-6': dados.estadoReq,
                        'Textfield-7': dados.paisReq,
                        'Textfield-8': dados.telReq,
                        'Textfield-9': dados.emailReq,
                        'En': dados.cidadeConsulado,
                    }
                },
                {
                    url: './forms-sp/ddn.pdf',
                    nome: 'DeclaracionDatosNacimientos.pdf',
                    campos: {
                        'Nombre': dados.nomeReq,
                        'Apellido 1': dadosDDN.sobrenomeReq1,
                        'Apellido 2': dadosDDN.sobrenomeReq2,
                        'Hora': dadosDDN.hora,
                        'Dia': dadosDDN.diaReq,
                        'Año': dadosDDN.anoReq,
                        'Localidad': dadosDDN.localidad,
                        'Pais': dadosDDN.paisNasc,
                        'Dia_Incripcion': dadosDDN.diaRegistro,
                        'Año Inscrito': dadosDDN.anoRegistro,
                        'Localidad Rehistro': dadosDDN.localRegistro,
                        'Pais Registro': dadosDDN.paisRegistro,
                        'Tomo': dadosDDN.livro,
                        'Página': dadosDDN.folha,
                        'Número': dadosDDN.termo,

                        'Nombre Padre': dadosDDN.nomePai,
                        'Apellido 1 Padre': dadosDDN.sobrenomePai1,
                        'Apellido 2 Padre': dadosDDN.sobrenomePai2,
                        'Hijo de': dadosDDN.paiPai,
                        'Y de': dadosDDN.maePai,
                        'Localidad Padre': dadosDDN.localidadPai,
                        'Pais Padre': dadosDDN.paisNascPai,
                        'Dia padre': dadosDDN.diaNascPai,
                        'del año': dadosDDN.anoNascPai,
                        'Estado civil del padre al nacerl': dadosDDN.estadoCivilPai1,
                        'Estado civil del padre en el momento actual': dadosDDN.estadoCivilPai2,
                        'Nac padre al nacer': dadosDDN.nacionalidadePai1,
                        'Nac padre ahora': dadosDDN.nacionalidadePai2,
                        'nto del nacimiento del hijoa': dadosDDN.domicilioPai,

                        'Nombre madre': dadosDDN.nomeMae,
                        'Apellido 1 madre': dadosDDN.sobrenomeMae1,
                        'Apellido 2 madre': dadosDDN.sobrenomeMae2,
                        'Hija de madre': dadosDDN.maeMae,
                        'Hija de padre': dadosDDN.paiMae,
                        'Nacida madre': dadosDDN.localidadMae,
                        'Pais madre': dadosDDN.PaisNascMae,
                        'Dia madre': dadosDDN.diaNascMae,
                        'del año_2': dadosDDN.anoNascMae,
                        'Estado civil de madre al nacerl': dadosDDN.EstadoCivilMae1,
                        'Estado civil de madre en el momento actual': dadosDDN.EstadoCivilMae2,
                        'Nac madre al nacer': dadosDDN.nacionalidadeMae1,
                        'nac madre act': dadosDDN.nacionalidadeMae2,
                        'Domicilio  de la madre en el momento del nacimiento del hijoa': dadosDDN.domicilioMae,

                        'Dia mat padres': dadosDDN.diaCelebracao,
                        'año': dadosDDN.anoCelebracao,
                        'undefined_4': dadosDDN.localCelebracao,
                        'Incrito RC': dadosDDN.localRegistroCas,

                        'DonDoña': dadosDDN.nomeCompletoReq,
                        'en calidad de': dadosDDN.calidad,
                        'Natural de': dadosDDN.naturalDe,
                        'día': dadosDDN.diaReq,
                        'año_2': dadosDDN.anoReq,
                        'cilio': dados.endReq,
                        'cep': dados.cepReq,
                        'Telf móvil': dados.telReq,
                        'undefined_5': dadosDDN.docId,
                        'email': dados.emailReq,
                        'Texto13': dados.cidadeConsulado
                    }
                },
                {
                    url: './forms-sp/solicitud.pdf',
                    nome: 'solicitud.pdf',
                    campos: {
                        'text_3zdxa': dados.cidadeConsulado,
                        'text_2afhz': 'NO',
                        'text_50lwgr': dados.nomeReq,
                        'text_13vndq': dadosDDN.nomePai + " " + dadosDDN.sobrenomePai1 + " " + dadosDDN.sobrenomePai2,
                        'text_14ddnl': dadosDDN.nomeMae + " " + dadosDDN.sobrenomeMae1 + " " + dadosDDN.sobrenomeMae2,
                        'text_4sdk': dados.dataNasc,
                        'text_5agtp': dados.naturalDe,
                        'text_19qywy': dados.enderecoCompleto,
                        'text_21vpwr': dados.telReq,
                        'text_22lvdx': dados.emailReq,
                        'text_29nvjz': dados.conjugeReq,
                        'text_48iktk': dados.cidadeConsulado,
                        'text_49wlnx': dados.cidadeConsulado
                    }
                }
            ];

            for (const arquivo of arquivos) {
                try {
                    const existingPdfBytes = await fetch(arquivo.url).then(res => res.arrayBuffer());
                    const pdfDoc = await PDFDocument.load(existingPdfBytes);
                    const form = pdfDoc.getForm();

                    for (const [campo, valor] of Object.entries(arquivo.campos)) {
                        try {
                            form.getTextField(campo).setText(valor);
                        } catch (e) {
                            console.warn(`Campo "${campo}" não encontrado em ${arquivo.nome}`);
                        }
                    }

                    const pdfBytes = await pdfDoc.save();
                    const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = arquivo.nome;
                    a.click();
                } catch (err) {
                    console.error(`Erro ao gerar ${arquivo.nome}:`, err);
                }
            }
        });
    </script>


</body>

</html>